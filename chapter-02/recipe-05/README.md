### 有向图的拓扑排序

#### 拓扑顺序

假设图$G=(V,E)$是个有向图。$G$的拓扑顺序就是为每个顶点$v \in V$的$f(v)$分配一个不同的数字，使得：  
对于每条有向边$(v,w) \in E$，均满足$f(v) < f(w)$。

#### 问题：拓扑排序

输入：有向无环图$G=(V,E)$。
输出：$G$的顶点的一个拓扑顺序。

#### TopSort(拓扑排序算法)

**输入**：邻接列表表示形式的有向无环图$G=(V,E)$。
**完成状态**：顶点的$f$值构成了$G$的一个拓扑顺序。

1. 把所有顶点标记为未探索
2. $curLabel := |V|$                // 记录顺序
3. **for** 每个$v \in V$ **do**
4. 　　**if** $v$为未探索 **then**  // 在一个之前的DFS中
5. 　　　　DFS-Topo(G,v)

#### DFS-Topo

**输入**：用邻接列表表示的有向无环图$G=(V,E)$和顶点$s \in V$。  
**完成状态**：每个可以从$s$到达的顶点被标记为“已探索”并分配一个$f$值。

1. 把$s$标记为已探索
2. **for** 每条边$(s,v)$都在$s$的外向邻接列表 **do**
3. 　　**if** $v$为未探索 **then**
4. 　　　　DFS-Topo(G,v)
5. $f(s) := curLabel$           // s的位置符合顺序
6. $curLabel := curLabel - 1$   // 从右向左进行操作
